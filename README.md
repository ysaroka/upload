## Установка

    $ composer create-project ysaroka/uploader ./

**DocumentRoot** веб-сервера - директория **./public**

Правила перенаправлений для **Apache** уже настроены в **./public/.htaccess**

Для **nginx** достаточно добавить следующее правило в конфигурационный файл сайта:

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

## Требования

**PHP >= 5.6.4**

**cURL** с поддержкой протокола **sftp**. Посмотреть поддерживаемые протоколы можно так:

    $ curl --version

[Инструкция](http://zeroset.mnim.org/2013/03/14/sftp-support-for-curl-in-ubuntu-12-10-quantal-quetzal-and-later/) по сборке curl с поддержкой **sftp**.

## Конфигурация
Настраиваем конфигурационный файл **.env**:

**DB_*** - подключение к БД;

**AMQP_*** - подключение к AMQP брокеру;

**WS_*** - параметры вебсокет сервера, нужно указать IP либо host (**WSSERVER_HOST**), на котором он будет доступен извне и к которому приложение будет пытаться подключиться при запуске. Остальные параметры менять при необходимости.

## Базы данных

В проекте использовалась версия **MySQL 5.5.49**

Добавляем необходимые таблицы, выполнив миграции в корне проекта:

    $ artisan migrate

## Демоны

Для работы приложения необходимо запустить 2 демона.

Запуск вебсокет-демона:

    $ artisan daemon:websockets

Запуск демона-загрузчика:

    $ artisan daemon:uploader
